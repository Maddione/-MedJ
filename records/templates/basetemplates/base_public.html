{% load i18n static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}MedJ{% endblock %}</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/dist/output.css' %}">
</head>
<body class="bg-site-background">
<header class="topbar">
  <div class="container-xl d-flex align-items-center justify-content-between topbar-inner">
    <div class="d-flex align-items-center gap-3">
      <div class="lang-dropdown">
        <button type="button" id="lang-toggle" class="lang-btn">
          <span class="lang-flag">
            {% if LANGUAGE_CODE|lower|slice:":2" == "bg" %}
            <svg viewBox="0 0 3 2" width="22" height="22"><rect width="3" height="2" fill="#fff"/><rect width="3" height="1.333" y="0.333" fill="#00966E"/><rect width="3" height="0.333" y="1.667" fill="#D62612"/></svg>
            {% else %}
            <svg viewBox="0 0 7410 3900" width="22" height="22"><path fill="#b22234" d="M0 0h7410v3900H0z"/><path d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0" stroke="#fff" stroke-width="300"/><path fill="#3c3b6e" d="M0 0h2964v2100H0z"/><g fill="#fff"><g id="d"><g id="c"><g id="e"><g id="b"><path id="a" d="M247 90l70 217-185-134h228L176 307z"/><use xlink:href="#a" y="420"/><use xlink:href="#a" y="840"/><use xlink:href="#a" y="1260"/></g><use xlink:href="#a" y="1680"/></g><use xlink:href="#b" x="247" y="210"/></g><use xlink:href="#c" x="494"/></g><use xlink:href="#d" x="988"/><use xlink:href="#c" x="1976"/><use xlink:href="#e" x="2470"/></g></svg>
            {% endif %}
          </span>
          <span class="lang-current">
            {% if LANGUAGE_CODE|lower|slice:":2" == "bg" %}BG{% else %}EN{% endif %}
          </span>
          <svg class="lang-caret" width="12" height="12" viewBox="0 0 20 20"><path fill="currentColor" d="M5.3 7.3a1 1 0 0 1 1.4 0L10 10.6l3.3-3.3a1 1 0 1 1 1.4 1.4l-4 4a1 1 0 0 1-1.4 0l-4-4a1 1 0 0 1 0-1.4z"/></svg>
        </button>
        <div class="lang-menu" id="lang-menu">
          <a href="#" class="lang-item" data-code="bg">
            <span class="lang-flag">
              <svg viewBox="0 0 3 2" width="18" height="18"><rect width="3" height="2" fill="#fff"/><rect width="3" height="1.333" y="0.333" fill="#00966E"/><rect width="3" height="0.333" y="1.667" fill="#D62612"/></svg>
            </span>
            <span>Български</span>
          </a>
          <a href="#" class="lang-item" data-code="en-us">
            <span class="lang-flag">
              <svg viewBox="0 0 7410 3900" width="18" height="18"><path fill="#b22234" d="M0 0h7410v3900H0z"/><path d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0" stroke="#fff" stroke-width="300"/><path fill="#3c3b6e" d="M0 0h2964v2100H0z"/><g fill="#fff"><g id="d"><g id="c"><g id="e"><g id="b"><path id="a" d="M247 90l70 217-185-134h228L176 307z"/><use xlink:href="#a" y="420"/><use xlink:href="#a" y="840"/><use xlink:href="#a" y="1260"/></g><use xlink:href="#a" y="1680"/></g><use xlink:href="#b" x="247" y="210"/></g><use xlink:href="#c" x="494"/></g><use xlink:href="#d" x="988"/><use xlink:href="#c" x="1976"/><use xlink:href="#e" x="2470"/></g></svg>
            </span>
            <span>English</span>
          </a>
          <form id="lang-form" action="{% url 'set_language' %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}">
            <input type="hidden" name="language" id="lang-code">
          </form>
        </div>
      </div>
      <a href="{% url 'medj:landing' %}" class="brand">
        <span class="brand-text">MedJ</span>
      </a>
    </div>
    <nav class="d-flex align-items-center gap-3">
      <a href="{% url 'medj:login' %}" class="nav-btn">{% trans "Вход" %}</a>
      <a href="{% url 'medj:register' %}" class="nav-btn nav-btn--primary">{% trans "Регистрация" %}</a>
    </nav>
  </div>
</header>
<main class="content container-xl">
  {% block content %}{% endblock %}
</main>
<script>
  const toggle=document.getElementById('lang-toggle');const menu=document.getElementById('lang-menu');const codeInput=document.getElementById('lang-code');const form=document.getElementById('lang-form');function closeAll(e){if(!menu.contains(e.target)&&!toggle.contains(e.target)){menu.classList.remove('open')}}
  toggle.addEventListener('click',function(){menu.classList.toggle('open')});document.querySelectorAll('.lang-item').forEach(function(it){it.addEventListener('click',function(ev){ev.preventDefault();codeInput.value=this.dataset.code;form.submit();})});document.addEventListener('click',closeAll);
</script>
</body>
</html>