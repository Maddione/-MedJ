{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
  <meta charset="utf-8">
  <title>{% trans "Обобщение на документ" %}</title>
  <style>
    body { font-family: DejaVu Sans, Arial, sans-serif; font-size: 12px; color: #111; }
    h1 { font-size: 20px; margin: 0 0 8px; }
    h2 { font-size: 16px; margin: 18px 0 8px; color: #0A4E75; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ddd; padding: 6px 8px; vertical-align: top; }
    th { background: #f3f4f6; }
    .meta { margin-bottom: 12px; }
    .muted { color: #555; }
    .chip { display: inline-block; background: #e8edf3; padding: 2px 6px; border-radius: 8px; margin: 0 4px 4px 0; }
  </style>
</head>
<body>
  <h1>{% trans "Обобщение на документ" %}</h1>
  <div class="meta">
    <div><strong>{% trans "Тип" %}:</strong> {{ document.doc_type.name }}</div>
    <div><strong>{% trans "Дата" %}:</strong> {{ document.document_date|date:"d.m.Y" }}</div>
    {% if document.notes %}<div class="muted">{{ document.notes }}</div>{% endif %}
    {% if document.tags.all %}
      <div style="margin-top:6px;">
        {% for t in document.tags.all %}
          <span class="chip">#{{ t.name }}</span>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <h2>{% trans "Файл" %}</h2>
  <table>
    <thead><tr><th>{% trans "Име" %}</th><th>{% trans "Размер" %}</th><th>{% trans "Лекар" %}</th></tr></thead>
    <tbody>
      <tr>
        <td>{{ document.file.name|cut:"documents/" }}</td>
        <td>{% if document.file.size %}{{ document.file.size }} B{% endif %}</td>
        <td>{{ document.practitioner.full_name|default:"" }}</td>
      </tr>
    </tbody>
  </table>

  {% if document.original_ocr_text %}
    <h2>{% trans "OCR текст" %}</h2>
    <div class="muted">{{ document.original_ocr_text|linebreaksbr }}</div>
  {% endif %}
</body>
</html>
